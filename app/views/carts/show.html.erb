<div class='row'>
  <div class='col-md-12'>
    <div class='panel'>
      <div class='panel-body'>
        <h1 class='text-left'>Your Cart</h1>
      </div>
    </div>
  </div>
</div>
<div class="row">
<div class="col-md-7">
  <div class='panel panel-default'>
    <div class='panel-body'>
      <% if !@order_items.empty? %>
      <%= render 'cart' %>
      <% else %>
      <%= render 'empty_cart' %>
      <% end %>
    </div>
  </div>

</div>

<div class="col-md-5">
  <div class='panel panel-default'>
    <div class='panel-body cart-right'>
      <% if @user %>
        <%= render partial: 'users/shipping_info' %>
        <% if session[:cart] %><br>
          <%= link_to "Checkout", checkout_path, id: "checkout", class: "form-control btn btn-primary btn-md" %><br>
        <% end %>
      <% else %>
        <p class="text-center">Please login before checking out.</p>
        <br>
        <%= link_to "Login", '/login',  class: "form-control btn btn-primary btn-md" %><br>
      <% end %>
    </div>
  </div>
</div>

</div>

<script>
  // Post to the provided URL with the specified parameters.
  function post(path, parameters) {
      var form = $('<form></form>');

      form.attr("method", "post");
      form.attr("action", path);

      $.each(parameters, function(key, value) {
          var field = $('<input></input>');

          field.attr("type", "hidden");
          field.attr("name", key);
          field.attr("value", value);

          form.append(field);
      });

      // The form needs to be a part of the document in
      // order for us to be able to submit it.
      $(document.body).append(form);
      form.submit();
  }
  $(document).load(function () {
    $('h1').click(function () {
      post("<%= checkout_path %>", {"this": "that"})
    })
  })
</script>
